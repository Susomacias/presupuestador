<div class="container mt-5">

    <div *ngIf="!element.name">
        <div class="mt-5 text-center">
            <div class="spinner-border" role="status">
              <span class="sr-only">Loading...</span>
            </div>
            <div class="mt-2 text-center">
                <p>Cargando elemento...</p>
            </div>
          </div>
    </div>

<div *ngIf="element.name">

    <h2 class="text-center">{{element.name}}</h2>
<div *ngIf="!element.surface_height && !element.coil_width">
    <form #newelementUNITForm="ngForm">
        <div class="d-flex flex-wrap">
            <div class="p-2 flex-fill bd-highlight">
                <div class="form-group">
                    <label for="name">Nombre <small *ngIf="newelementUNITForm.invalid"
                            class="text-danger">(Obligatorio)</small></label>
                    <input type="text" name="nombre" class="form-control" #subject="ngModel" [(ngModel)]="element.name"
                        required>
                    <small *ngIf="!subject.valid && subject.touched" class="invalid-feedback d-block">
                        Es necesario poner un nombre valido
                    </small>
                </div>

                <div class="form-group">
                    <label for="description">Descripción</label>
                    <textarea rows="5" name="descripcion" class="form-control" #subject="ngModel"
                        [(ngModel)]="element.description"></textarea>
                </div>
            </div>

            <div class="p-2 flex-fill bd-highlight ml-md-5">
                <div class="d-flex flex-wrap">
                    <div class="flex-grow-2 bd-highlight">
                        <div class="form-group">
                            <label for="unit_amount">Cantidad <small *ngIf="newelementUNITForm.invalid"
                                    class="text-danger">(Obligatorio)</small></label>
                            <input type="number" name="unit_amount" class="form-control" #uamount="ngModel"
                                [(ngModel)]="element.unit_amount" style="text-align: right;" required>
                        </div>
                    </div>
                    <div class="flex-grow-2 bd-highlight ml-md-2">
                        <div class="form-group">
                            <label for="unit_measurement">Tipo de medida (Und., cm, metros, litros...)</label>
                            <div class="input-group mb-3">
                                <input type="text" name="unit_measurement" class="form-control" #subject="ngModel"
                                    [(ngModel)]="element.unit_measurement" aria-describedby="basic-addon2">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="d-flex flex-wrap">
                    <div class="flex-grow-2 bd-highlight">
                        <div class="form-group">
                            <label for="unit_costprice">Coste Unitario</label>
                            <div class="input-group mb-3">
                                <input type="number" name="unit_costprice" class="form-control" #subject="ngModel"
                                    aria-describedby="basic-addon2" (change)="unitPriceCal()"
                                    [(ngModel)]="element.unit_costprice" style="text-align: right;">
                                <div class="input-group-append">
                                    <span class="input-group-text" id="basic-addon2"
                                        style="background-color: white;">{{user.coin}}</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="flex-grow-2 bd-highlight ml-md-2">
                        <div class="form-group">
                            <label for="unit_profitpercentage">Porcentaje de beneficio (%)</label>
                            <div class="input-group mb-3">
                                <input type="number" name="unit_profitpercentage" class="form-control"
                                    #subject="ngModel" (change)="unitPriceCal()" style="text-align: right;"
                                    [(ngModel)]="element.unit_profitpercentage" aria-describedby="basic-addon2">

                                <div class="input-group-append">
                                    <span class="input-group-text" id="basic-addon2"
                                        style="background-color: white;">%</span>
                                </div>
                            </div>

                        </div>
                    </div>

                    <div class="flex-grow-2 bd-highlight ml-md-2">
                        <div class="form-group">
                            <label for="unit_price">Total</label>
                            <div class="input-group mb-3">
                                <input type="number" name="unit_price" class="form-control" #subject="ngModel"
                                    (change)="unitCostPriceCal()" [(ngModel)]="element.unit_price"
                                    aria-describedby="basic-addon2" style="text-align: right;">
                                <div class="input-group-append">
                                    <span class="input-group-text" id="basic-addon2"
                                        style="background-color: white;">{{user.coin}}</span>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
                <button name="UPDATE" class="btn btn-warning  ml-2"
                        (click)="updateElement({
                                    'id':element.id,
                                    'user_id':element.user_id,
                                    'article_id':element.article_id,		
                                    'name':element.name,
                                    'description':element.description,
                                    'unit_amount':element.unit_amount,
                                    'unit_measurement':element.unit_measurement,
                                    'unit_costprice':element.unit_costprice,
                                    'unit_profitpercentage':element.unit_profitpercentage,
                                    'unit_price':element.unit_price,
                                    'surface_multiple':element.surface_multiple,
                                    'surface_multiple_amount':element.surface_multiple_amount,
                                    'surface_height':element.surface_height,
                                    'surface_width':element.surface_width,
                                    'surface_layout':element.surface_layout,
                                    'surface_article_height':element.surface_article_height,
                                    'surface_article_width':element.surface_article_width,
                                    'surface_article_layout':element.surface_article_layout,
                                    'surface_itens':element.surface_itens,
                                    'surface_total_surfaces':element.surface_total_surfaces,
                                    'surface_whole':element.surface_whole,
                                    'surface_surcharge_item':element.surface_surcharge_item,
                                    'surface_individual_cost':element.surface_individual_cost,
                                    'surface_costprice':element.surface_costprice,
                                    'surface_profitpercentage':element.surface_profitpercentage,
                                    'surface_price':element.surface_price,
                                    'coil_width':element.coil_width,
                                    'coil_article_height':element.coil_article_height,
                                    'coil_article_width':element.coil_article_width,
                                    'coil_article_layout':element.coil_article_layout,
                                    'coil_articles_amount':element.coil_articles_amount,
                                    'coil_total_measure':element.coil_total_measure,
                                    'coil_surcharge_item':element.coil_surcharge_item,
                                    'coil_measured_cost':element.coil_measured_cost,
                                    'coil_costprice':element.coil_costprice,
                                    'coil_profitpercentage':element.coil_profitpercentage,
                                    'coil_price':element.coil_price

                                })"> Guardar Cambios para este artículo
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-save-fill" viewBox="0 0 16 16">
                                    <path d="M8.5 1.5A1.5 1.5 0 0 1 10 0h4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h6c-.314.418-.5.937-.5 1.5v7.793L4.854 6.646a.5.5 0 1 0-.708.708l3.5 3.5a.5.5 0 0 0 .708 0l3.5-3.5a.5.5 0 0 0-.708-.708L8.5 9.293V1.5z"/>
                                  </svg>
                            </button>
            </div>
        </div>
    </form>
    <div class="alert alert-success" *ngIf="message == true">
        El elemento ha sido actualizado correctamente.
    </div>

    <div class="alert alert-danger" *ngIf="status=='error'">
        El elemento no se ha actualizado.
    </div>
</div>

<div *ngIf="element.surface_height">
    <div class="alert alert-success" *ngIf="message == true">
        El elemento ha sido enviado correctamente.
    </div>

    <div class="alert alert-danger" *ngIf="status=='error'">
        El elemento no se ha enviado.
    </div>
    <div class="container-sm">
        <form #newelementSURFACEForm="ngForm">

            <div class="d-flex flex-wrap">
                <div class="p-2 flex-fill bd-highlight">
                    <div class="form-group">
                        <label for="name">Nombre <small *ngIf="newelementSURFACEForm.invalid"
                                class="text-danger">(Obligatorio)</small> </label>
                        <input type="text" name="nombre" class="form-control" #subject="ngModel"
                            [(ngModel)]="element.name" required>
                        <small *ngIf="!subject.valid && subject.touched" class="invalid-feedback d-block">
                            Es necesario poner un nombre valido
                        </small>
                    </div>

                    <div class="form-group">
                        <label for="description">Descripción</label>
                        <textarea rows="5" name="descripcion" class="form-control" #subject="ngModel"
                            [(ngModel)]="element.description">
                        </textarea>
                    </div>
                </div>

                <hr>

                <div class="p-2 flex-fill bd-highlight">

                    <div class="d-flex flex-wrap">
                        <div class="flex-grow-2 bd-highlight mr-3">
                            <div class="form-group">
                                <label for="surface_amount">Cantidad de artículos</label>
                                <input type="number" name="surface_amount" class="form-control" #subject="ngModel"
                                    [(ngModel)]="element.unit_amount" (change)="SurfaceAmountCal()" style="text-align: right;">
                            </div>
                        </div>
                        <div class="flex-grow-2 bd-highlight">
                            <div class="form-group">
                                <label for="surface_measurement">Tipo de medida (Und., cm, metros, litros...)</label>
                                <input type="text" name="surface_measurement" class="form-control" value="{{user.measure}}"
                                    #subject="ngModel" [(ngModel)]="element.unit_measurement" (change)="measurement()">
                            </div>
                        </div>
                    </div>

                    <hr>

                    <div class="card text-center">
                        <h3 class="card-header">
                            <b>Procesar multiples superficies a la vez</b>
                            <div>
                                <p class="small" style="line-height: 1rem;"> Ej.: Cortar 10 laminas al mismo tiempo o
                                    usar un molde del que se extraen
                                    varios artículos.</p>
                            </div>
                        </h3>
                        <div class="card-body">
                            <div class="d-flex flex-wrap justify-content-center">
                                <div class="flex-grow-2 bd-highlight mt-4 mr-3">
                                    <label class="mr-1"> Activar </label>
                                    <mat-slide-toggle (click)="surfaceSlide()" [(ngModel)]="multipleIsChecked"
                                        [ngModelOptions]="{standalone: true}" (change)="SurfaceAmountCal()">
                                    </mat-slide-toggle>
                                    <div class="form-group">
                                        <input type="hidden" name="multiple" class="form-control" #subject="ngModel"
                                            [(ngModel)]="element.surface_multiple" (change)="SurfaceAmountCal()">
                                    </div>
                                </div>
                                <div *ngIf="multipleIsChecked==true">
                                    <div class="flex-grow-2 bd-highlight">
                                        <div class="form-group">
                                            <label for="surface_multiple_amount">Cantidad de Superficies procesadas a la
                                                vez</label>
                                            <input type="number" name="surface_multiple_amount" class="form-control"
                                                style="text-align: right;" #subject="ngModel"
                                                (change)="SurfaceAmountCal()"
                                                [(ngModel)]="element.surface_multiple_amount">
                                        </div>
                                    </div>
                                </div>
                                <div *ngIf="multipleIsChecked==false">
                                    <div class="flex-grow-2 bd-highlight">
                                        <div class="form-group">
                                            <label for="surface_multiple_amount">Cantidad de Superficies procesadas a la
                                                vez</label>
                                            <input type="diss" name="surface_multiple_amount" class="form-control"
                                                #subject="ngModel" [(ngModel)]="element.surface_multiple_amount"
                                                (change)="SurfaceAmountCal()" disabled>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div *ngIf="multipleIsChecked==true">
                                <p class="text-warning">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                        class="bi bi-exclamation-triangle-fill" viewBox="0 0 16 16">
                                        <path
                                            d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z" />
                                    </svg>
                                    Esto dividirá el numero de planchas necesarias entre la cantidad de <br> superficies
                                    procesadas a la vez, para obtener el número total de procesados
                                </p>
                            </div>
                        </div>
                    </div>

                    <hr>

                    <div class="card text-center">
                        <h3 class="card-header">
                            <b>Tamaño de la superficie</b>
                        </h3>
                        <div class="card-body">
                            <div class="d-flex flex-row justify-content-center">
                                <div class="p-2 mr-3">
                                    <div class="form-group">
                                        <label for="surface_width">Ancho de superficie <small
                                                *ngIf="newelementSURFACEForm.invalid"
                                                class="text-danger">(Obligatorio)</small></label>
                                        <div class="input-group mb-3">
                                            <input type="number" aria-describedby="basic-addon2" name="surface_width"
                                                class="form-control" #swidth="ngModel" style="text-align: right;"
                                                [(ngModel)]="element.surface_width" (change)="SurfaceAmountCal()"
                                                required>
                                            <div class="input-group-append">
                                                <span class="input-group-text" id="basic-addon2"
                                                    style="background-color: white;">{{element.unit_measurement}}</span>
                                            </div>
                                            <small *ngIf="!swidth.valid && swidth.touched"
                                                class="invalid-feedback d-block">
                                                Campo obligatorio
                                            </small>
                                        </div>
                                    </div>
                                </div>
                                <div class="p-2">
                                    <div class="form-group">
                                        <label for="surface_height">Alto de superficie <small
                                                *ngIf="newelementSURFACEForm.invalid"
                                                class="text-danger">(Obligatorio)</small></label>
                                        <div class="input-group mb-3">
                                            <input type="number" aria-describedby="basic-addon2" name="surface_height"
                                                class="form-control" #sheight="ngModel" style="text-align: right;"
                                                [(ngModel)]="element.surface_height" (change)="SurfaceAmountCal()"
                                                required>

                                            <div class="input-group-append">
                                                <span class="input-group-text" id="basic-addon2"
                                                    style="background-color: white;">{{element.unit_measurement}}</span>
                                            </div>
                                        </div>

                                        <small *ngIf="!sheight.valid && sheight.touched"
                                            class="invalid-feedback d-block">
                                            Campo Obligatorio
                                        </small>
                                    </div>
                                </div>
                            </div>
                            <div class="d-flex flex-row justify-content-center">
                                <div class="p-2 text-left">
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="SurfaceSizeOptions"
                                            id="SurfaceSize1" value="horizontal" #slayout="ngModel"
                                            [(ngModel)]="element.surface_layout" (change)="SurfaceAmountCal()"
                                            (click)="surfaceLayaut()" checked>
                                        <label class="form-check-label" for="SurfaceSize1">Horizontal</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="SurfaceSizeOptions"
                                            id="SurfaceSize2" value="vertical" #slayout="ngModel"
                                            [(ngModel)]="element.surface_layout" (change)="SurfaceAmountCal()"
                                            (click)="surfaceLayaut()">
                                        <label class="form-check-label" for="SurfaceSize2">Vertical</label>
                                    </div>
                                </div>
                                <div class="p-2 text-left">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" name="swhole" id="swhole"
                                            #slayout="ngModel" [(ngModel)]="element.surface_whole"
                                            (change)="wholeCheck()" (change)="SurfaceAmountCal()">
                                        <label class="form-check-label" for="swhole">
                                            Añadir el material sobrante al coste <br>
                                            <small>(Para calcular usando solo planchas enteras)</small>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <hr>

                    <div class="card text-center">
                        <h3 class="card-header">
                            <b>Tamaño del Artículo</b>
                        </h3>
                        <div class="card-body">
                            <div class="d-flex flex-row justify-content-center">
                                <div class="p-2 mr-3">
                                    <div class="form-group">
                                        <label for="surface_article_width">Ancho del Artículo</label>
                                        <div class="input-group mb-3">
                                            <input type="number" aria-describedby="basic-addon2"
                                                name="surface_article_width" class="form-control" #subject="ngModel"
                                                style="text-align: right;" [(ngModel)]="element.surface_article_width"
                                                (change)="SurfaceAmountCal()">

                                            <div class="input-group-append">
                                                <span class="input-group-text" id="basic-addon2"
                                                    style="background-color: white;">{{element.unit_measurement}}</span>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                                <div class="p-2">
                                    <div class="form-group">
                                        <label for="surface_height">Alto del Artículo</label>
                                        <div class="input-group mb-3">
                                            <input type="number" aria-describedby="basic-addon2"
                                                name="surface_article_height" class="form-control" #subject="ngModel"
                                                [(ngModel)]="element.surface_article_height" style="text-align: right;"
                                                (change)="SurfaceAmountCal()">
                                            <div class="input-group-append">
                                                <span class="input-group-text" id="basic-addon2"
                                                    style="background-color: white;">{{element.unit_measurement}}</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="d-flex flex-row justify-content-center">
                                <div class="p-2 text-left">
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="ArticleSizeOptions"
                                            id="ArticleSize1" value="horizontal" #alayout="ngModel"
                                            [(ngModel)]="element.surface_article_layout" (change)="SurfaceAmountCal()"
                                            (click)="surfaceArticleLayaut()" checked>
                                        <label class="form-check-label" for="ArticleSize1">Horizontal</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="ArticleSizeOptions"
                                            id="ArticleSize2" value="vertical" #alayout="ngModel"
                                            [(ngModel)]="element.surface_article_layout" (change)="SurfaceAmountCal()"
                                            (click)="surfaceArticleLayaut()">
                                        <label class="form-check-label" for="ArticleSize2">Vertical</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <hr>

                    <div class="card text-center">
                        <h3 class="card-header">
                            <b>Resultado del calculo de superficie</b>
                        </h3>
                        <div class="card-body">
                            <div class="d-flex flex-row justify-content-center">
                                <div class="p-2 mr-3">
                                    <div class="form-group">
                                        <label for="surface_itens">Articulos que entran en una superficie</label>
                                        <input type="number" name="surface_itens" class="form-control"
                                            style="text-align: right;" #subject="ngModel"
                                            [(ngModel)]="element.surface_itens" disabled>
                                    </div>
                                </div>
                                <div class="p-2">
                                    <div class="form-group">
                                        <label for="surface_total_surfaces">Total de superficies necesarias</label>
                                        <input type="number" name="surface_total_surfaces" class="form-control"
                                            style="text-align: right;" #subject="ngModel"
                                            [(ngModel)]="element.surface_total_surfaces" disabled>
                                    </div>
                                </div>
                            </div>
                            <div *ngIf="element.surface_itens<1 && element.surface_itens!=null">
                                <p class="text-warning">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                        class="bi bi-exclamation-triangle-fill" viewBox="0 0 16 16">
                                        <path
                                            d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z" />
                                    </svg>
                                    El artículo, es más grande que la superficie <br> serán necesarias varias
                                    superficies para crear un artículo.
                                </p>
                            </div>
                        </div>
                    </div>

                    <hr>

                    <div class="card text-center">
                        <h3 class="card-header">
                            <b>Costes</b>
                        </h3>
                        <div class="card-body">
                            <div class="d-flex flex-row justify-content-center">
                                <div class="p-2 mr-3">
                                    <div class="form-group">
                                        <label for="surface_surcharge_item">Coste de recargo por artículo</label>
                                        <div class="input-group mb-3">
                                            <input type="number" aria-describedby="basic-addon2"
                                                style="text-align: right;" name="surface_surcharge_item"
                                                class="form-control" #subject="ngModel"
                                                [(ngModel)]="element.surface_surcharge_item"
                                                (change)="SurfaceAmountCal()">
                                            <div class="input-group-append">
                                                <span class="input-group-text" id="basic-addon2"
                                                    style="background-color: white;">{{user.coin}}</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="p-2">
                                    <div class="form-group">
                                        <label for="surface_individual_cost">Coste de una superficie</label>
                                        <div class="input-group mb-3">
                                            <input type="number" aria-describedby="basic-addon2"
                                                style="text-align: right;" name="surface_individual_cost"
                                                class="form-control" #subject="ngModel"
                                                [(ngModel)]="element.surface_individual_cost"
                                                (change)="SurfaceAmountCal()">
                                            <div class="input-group-append">
                                                <span class="input-group-text" id="basic-addon2"
                                                    style="background-color: white;">{{user.coin}}</span>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <hr>

                    <div class="d-flex flex-wrap">
                        <div class="flex-grow-2 bd-highlight">
                            <div class="form-group">
                                <label for="surface_costprice">Coste</label>
                                <div class="input-group mb-3">
                                    <input type="number" name="surface_costprice" class="form-control"
                                        style="text-align: right;" #subject="ngModel" aria-describedby="basic-addon2"
                                        (change)="surfacePriceCal()" [(ngModel)]="element.surface_costprice" disabled>
                                    <div class="input-group-append">
                                        <span class="input-group-text" id="basic-addon2">{{user.coin}}</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="flex-grow-2 bd-highlight ml-md-2">
                            <div class="form-group">
                                <label for="surface_profitpercentage">Porcentaje de beneficio (%)</label>
                                <div class="input-group mb-3">
                                    <input type="number" name="surface_profitpercentage" class="form-control"
                                        style="text-align: right;" #subject="ngModel" aria-describedby="basic-addon2"
                                        (change)="surfacePriceCal()" [(ngModel)]="element.surface_profitpercentage">
                                    <div class="input-group-append">
                                        <span class="input-group-text" id="basic-addon2"
                                            style="background-color: white;">%</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="flex-grow-2 bd-highlight ml-md-2">
                            <div class="form-group">
                                <label for="surface_price">Total</label>
                                <div class="input-group mb-3">
                                    <input type="number" name="surface_price" class="form-control" #subject="ngModel"
                                        aria-describedby="basic-addon2" (change)="surfaceCostPriceCal()"
                                        style="text-align: right;" [(ngModel)]="element.surface_price">
                                    <div class="input-group-append">
                                        <span class="input-group-text" id="basic-addon2"
                                            style="background-color: white;">{{user.coin}}</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <button name="UPDATE" class="btn btn-warning  ml-2"
                        (click)="updateElement({
                                    'id':element.id,
                                    'user_id':element.user_id,
                                    'article_id':element.article_id,		
                                    'name':element.name,
                                    'description':element.description,
                                    'unit_amount':element.unit_amount,
                                    'unit_measurement':element.unit_measurement,
                                    'unit_costprice':element.unit_costprice,
                                    'unit_profitpercentage':element.unit_profitpercentage,
                                    'unit_price':element.unit_price,
                                    'surface_multiple':element.surface_multiple,
                                    'surface_multiple_amount':element.surface_multiple_amount,
                                    'surface_height':element.surface_height,
                                    'surface_width':element.surface_width,
                                    'surface_layout':element.surface_layout,
                                    'surface_article_height':element.surface_article_height,
                                    'surface_article_width':element.surface_article_width,
                                    'surface_article_layout':element.surface_article_layout,
                                    'surface_itens':element.surface_itens,
                                    'surface_total_surfaces':element.surface_total_surfaces,
                                    'surface_whole':element.surface_whole,
                                    'surface_surcharge_item':element.surface_surcharge_item,
                                    'surface_individual_cost':element.surface_individual_cost,
                                    'surface_costprice':element.surface_costprice,
                                    'surface_profitpercentage':element.surface_profitpercentage,
                                    'surface_price':element.surface_price,
                                    'coil_width':element.coil_width,
                                    'coil_article_height':element.coil_article_height,
                                    'coil_article_width':element.coil_article_width,
                                    'coil_article_layout':element.coil_article_layout,
                                    'coil_articles_amount':element.coil_articles_amount,
                                    'coil_total_measure':element.coil_total_measure,
                                    'coil_surcharge_item':element.coil_surcharge_item,
                                    'coil_measured_cost':element.coil_measured_cost,
                                    'coil_costprice':element.coil_costprice,
                                    'coil_profitpercentage':element.coil_profitpercentage,
                                    'coil_price':element.coil_price

                                })"> Guardar Cambios para este artículo
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-save-fill" viewBox="0 0 16 16">
                                    <path d="M8.5 1.5A1.5 1.5 0 0 1 10 0h4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h6c-.314.418-.5.937-.5 1.5v7.793L4.854 6.646a.5.5 0 1 0-.708.708l3.5 3.5a.5.5 0 0 0 .708 0l3.5-3.5a.5.5 0 0 0-.708-.708L8.5 9.293V1.5z"/>
                                  </svg>
                            </button>
                </div>
            </div>
        </form>
        <div class="alert alert-success" *ngIf="message == true">
            El elemento ha sido enviado correctamente.
        </div>

        <div class="alert alert-danger" *ngIf="status=='error'">
            El elemento no se ha enviado.
        </div>
    </div>
</div>

<div *ngIf="element.coil_width">
    <div class="alert alert-success" *ngIf="message == true">
        El elemento ha sido enviado correctamente.
    </div>

    <div class="alert alert-danger" *ngIf="status=='error'">
        El elemento no se ha enviado.
    </div>
    <div class="container-sm">
        <form #newelementCOILForm="ngForm">

            <div class="d-flex flex-wrap">
                <div class="p-2 flex-grow-1 bd-highlight">
                    <div class="form-group">
                        <label for="name">Nombre <small *ngIf="newelementCOILForm.invalid"
                                class="text-danger">(Obligatorio)</small></label>
                        <input type="text" name="nombre" class="form-control" #subject="ngModel"
                            [(ngModel)]="element.name" required>
                        <small *ngIf="!subject.valid && subject.touched" class="invalid-feedback d-block">
                            Es necesario poner un nombre valido
                        </small>
                    </div>

                    <div class="form-group">
                        <label for="description">Descripción</label>
                        <textarea rows="5" name="descripcion" class="form-control" #subject="ngModel"
                            [(ngModel)]="element.description"></textarea>
                    </div>
                </div>

                <hr>

                <div class="p-2 flex-fill bd-highlight ml-md-5">
                    <div class="d-flex flex-wrap">
                        <div class="flex-grow-2 bd-highlight">
                            <div class="form-group">
                                <label for="surface_amount">Cantidad de artículos</label>
                                <input type="number" name="surface_amount" class="form-control" #subject="ngModel"
                                    style="text-align: right;" [(ngModel)]="element.unit_amount"
                                    (change)="CoilAmountCal()">
                            </div>
                        </div>
                        <div class="flex-grow-2 bd-highlight ml-md-2">
                            <div class="form-group">
                                <label for="surface_measurement">Tipo de medida (Und., cm, metros, litros...)</label>
                                <input type="text" name="surface_measurement" class="form-control" #subject="ngModel"
                                    [(ngModel)]="element.unit_measurement" (change)="measurement()">
                            </div>
                        </div>
                    </div>

                    <hr>

                    <div class="d-flex flex-wrap">
                        <div class="card text-center">
                            <h3 class="card-header">
                                <b>Tamaño de la Bobina</b>
                            </h3>
                            <div class="card-body">
                                <div class="d-flex flex-row justify-content-center">
                                    <div class="p-2 mr-3">
                                        <div class="form-group">
                                            <label for="coil_width">Ancho de la bobina <small
                                                    *ngIf="newelementCOILForm.invalid"
                                                    class="text-danger">(Obligatorio)</small></label>
                                            <div class="input-group mb-3">
                                                <input type="number" aria-describedby="basic-addon2" name="coil_width"
                                                    class="form-control" #cwidth="ngModel" style="text-align: right;"
                                                    [(ngModel)]="element.coil_width" (change)="CoilAmountCal()"
                                                    required>
                                                <div class="input-group-append">
                                                    <span class="input-group-text" id="basic-addon2"
                                                        style="background-color: white;">{{element.unit_measurement}}</span>
                                                </div>
                                            </div>
                                            <small *ngIf="!cwidth.valid && cwidth.touched"
                                                class="invalid-feedback d-block">
                                                Campo obligatorio
                                            </small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <hr>

                    <div class="d-flex flex-wrap">
                        <div class="card text-center">
                            <h3 class="card-header">
                                <b>Tamaño del Artículo</b>
                            </h3>
                            <div class="card-body">
                                <div class="d-flex flex-row justify-content-center">
                                    <div class="p-2 mr-3">
                                        <div class="form-group">
                                            <label for="coil_article_width">Ancho del Artículo</label>
                                            <div class="input-group mb-3">
                                                <input type="number" aria-describedby="basic-addon2"
                                                    name="coil_article_width" class="form-control" #subject="ngModel"
                                                    style="text-align: right;" [(ngModel)]="element.coil_article_width"
                                                    (change)="CoilAmountCal()">
                                                <div class="input-group-append">
                                                    <span class="input-group-text" id="basic-addon2"
                                                        style="background-color: white;">{{element.unit_measurement}}</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="p-2">
                                        <div class="form-group">
                                            <label for="coil_height">Alto del Artículo</label>
                                            <div class="input-group mb-3">
                                                <input type="number" aria-describedby="basic-addon2"
                                                    style="text-align: right;" name="coil_article_height"
                                                    class="form-control" #subject="ngModel"
                                                    [(ngModel)]="element.coil_article_height"
                                                    (change)="CoilAmountCal()">
                                                <div class="input-group-append">
                                                    <span class="input-group-text" id="basic-addon2"
                                                        style="background-color: white;">{{element.unit_measurement}}</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="d-flex flex-row">
                                    <div class="p-2 text-left">
                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input" type="radio" name="inlineRadioOptions"
                                                id="inlineRadio1" value="horizontal" #clayout="ngModel"
                                                [(ngModel)]="element.coil_article_layout" (click)="coilArticleLayaut()"
                                                checked>
                                            <label class="form-check-label" for="inlineRadio1">Horizontal</label>
                                        </div>
                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input" type="radio" name="inlineRadioOptions"
                                                id="inlineRadio2" value="vertical" #clayout="ngModel"
                                                [(ngModel)]="element.coil_article_layout" (click)="coilArticleLayaut()">
                                            <label class="form-check-label" for="inlineRadio2">Vertical</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <hr>

                    <div class="d-flex flex-wrap">
                        <div class="card text-center">
                            <h3 class="card-header">
                                <b>Resultado del calculo de superficie</b>
                            </h3>
                            <div class="card-body">
                                <div class="d-flex flex-row justify-content-center">
                                    <div class="p-2">
                                        <div class="form-group">
                                            <label for="coil_total_measure">Total de bobina a utilizar</label>
                                            <div class="input-group mb-3">
                                                <input type="number" aria-describedby="basic-addon2"
                                                    style="text-align: right;" name="coil_total_measure"
                                                    class="form-control" #subject="ngModel"
                                                    [(ngModel)]="element.coil_total_measure" disabled
                                                    (change)="CoilAmountCal()">
                                                <div class="input-group-append">
                                                    <span class="input-group-text" id="basic-addon2"
                                                        style="background-color: white;">{{element.unit_measurement}}</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <hr>

                    <div class="d-flex flex-wrap">
                        <div class="card text-center">
                            <h3 class="card-header">
                                <b>Costes</b>
                            </h3>
                            <div class="card-body">
                                <div class="d-flex flex-row justify-content-center">
                                    <div class="p-2 mr-3">
                                        <div class="form-group">
                                            <label for="coil_surcharge_item">Coste de recargo por artículo</label>
                                            <div class="input-group mb-3">
                                                <input type="number" aria-describedby="basic-addon2"
                                                    style="text-align: right;" name="coil_surcharge_item"
                                                    class="form-control" #subject="ngModel"
                                                    [(ngModel)]="element.coil_surcharge_item"
                                                    (change)="CoilAmountCal()">

                                                <div class="input-group-append">
                                                    <span class="input-group-text" id="basic-addon2"
                                                        style="background-color: white;">{{user.coin}}</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="p-2">
                                        <div class="form-group">
                                            <label for="coil_measured_cost">Coste por medida de la bobina</label>
                                            <div class="input-group mb-3">
                                                <input type="number" aria-describedby="basic-addon2"
                                                    style="text-align: right;" name="coil_measured_cost"
                                                    class="form-control" #subject="ngModel"
                                                    [(ngModel)]="element.coil_measured_cost" (change)="CoilAmountCal()">
                                                <div class="input-group-append">
                                                    <span class="input-group-text" id="basic-addon2"
                                                        style="background-color: white;">{{user.coin}}/{{element.unit_measurement}}</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <hr>

                    <div class="d-flex flex-wrap">
                        <div class="flex-grow-2 bd-highlight">
                            <div class="form-group">
                                <label for="surface_costprice">Coste</label>
                                <div class="input-group mb-3">
                                    <input type="number" name="surface_costprice" class="form-control"
                                        style="text-align: right;" #subject="ngModel" aria-describedby="basic-addon2"
                                        [(ngModel)]="element.coil_costprice" disabled>
                                    <div class="input-group-append">
                                        <span class="input-group-text" id="basic-addon2">{{user.coin}}</span>
                                    </div>
                                </div>

                            </div>
                        </div>

                        <div class="flex-grow-2 bd-highlight ml-md-2">
                            <div class="form-group">
                                <label for="surface_profitpercentage">Porcentaje de beneficio (%)</label>
                                <div class="input-group mb-3">
                                    <input type="number" name="surface_profitpercentage" class="form-control"
                                        style="text-align: right;" #subject="ngModel" aria-describedby="basic-addon2"
                                        (change)="coilPriceCal()" [(ngModel)]="element.coil_profitpercentage">

                                    <div class="input-group-append">
                                        <span class="input-group-text" id="basic-addon2"
                                            style="background-color: white;">%</span>
                                    </div>
                                </div>

                            </div>
                        </div>

                        <div class="flex-grow-2 bd-highlight ml-md-2">
                            <div class="form-group">
                                <label for="surface_price">Total</label>
                                <div class="input-group mb-3">
                                    <input type="number" name="surface_price" class="form-control" #subject="ngModel"
                                        aria-describedby="basic-addon2" (change)="coilCostPriceCal()"
                                        style="text-align: right;" [(ngModel)]="element.coil_price">
                                    <div class="input-group-append">
                                        <span class="input-group-text" id="basic-addon2"
                                            style="background-color: white;">{{user.coin}}</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <button name="UPDATE" class="btn btn-warning  ml-2"
                        (click)="updateElement({
                                    'id':element.id,
                                    'user_id':element.user_id,
                                    'article_id':element.article_id,		
                                    'name':element.name,
                                    'description':element.description,
                                    'unit_amount':element.unit_amount,
                                    'unit_measurement':element.unit_measurement,
                                    'unit_costprice':element.unit_costprice,
                                    'unit_profitpercentage':element.unit_profitpercentage,
                                    'unit_price':element.unit_price,
                                    'surface_multiple':element.surface_multiple,
                                    'surface_multiple_amount':element.surface_multiple_amount,
                                    'surface_height':element.surface_height,
                                    'surface_width':element.surface_width,
                                    'surface_layout':element.surface_layout,
                                    'surface_article_height':element.surface_article_height,
                                    'surface_article_width':element.surface_article_width,
                                    'surface_article_layout':element.surface_article_layout,
                                    'surface_itens':element.surface_itens,
                                    'surface_total_surfaces':element.surface_total_surfaces,
                                    'surface_whole':element.surface_whole,
                                    'surface_surcharge_item':element.surface_surcharge_item,
                                    'surface_individual_cost':element.surface_individual_cost,
                                    'surface_costprice':element.surface_costprice,
                                    'surface_profitpercentage':element.surface_profitpercentage,
                                    'surface_price':element.surface_price,
                                    'coil_width':element.coil_width,
                                    'coil_article_height':element.coil_article_height,
                                    'coil_article_width':element.coil_article_width,
                                    'coil_article_layout':element.coil_article_layout,
                                    'coil_articles_amount':element.coil_articles_amount,
                                    'coil_total_measure':element.coil_total_measure,
                                    'coil_surcharge_item':element.coil_surcharge_item,
                                    'coil_measured_cost':element.coil_measured_cost,
                                    'coil_costprice':element.coil_costprice,
                                    'coil_profitpercentage':element.coil_profitpercentage,
                                    'coil_price':element.coil_price

                                })"> Guardar Cambios para este artículo
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-save-fill" viewBox="0 0 16 16">
                                    <path d="M8.5 1.5A1.5 1.5 0 0 1 10 0h4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h6c-.314.418-.5.937-.5 1.5v7.793L4.854 6.646a.5.5 0 1 0-.708.708l3.5 3.5a.5.5 0 0 0 .708 0l3.5-3.5a.5.5 0 0 0-.708-.708L8.5 9.293V1.5z"/>
                                  </svg>
                            </button>
                </div>
            </div>
        </form>
        <div class="alert alert-success" *ngIf="message == true">
            El elemento ha sido enviado correctamente.
        </div>

        <div class="alert alert-danger" *ngIf="status=='error'">
            El elemento no se ha enviado.
        </div>
    </div>
    
</div>

</div>
    
</div>
